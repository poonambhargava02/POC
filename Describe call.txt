/**
  *   Description     :   This class is used to get all the standard and custom object of org
  *   Created by      :   
  *
  *   Created Date    :   09/27/2017
  *
  *   Revision Log    :   
  **/
public class GetManagePackageObject {

    public void getObjectName() {  
	
    	MAp<String,String> mapOfSobject = new Map<String,String>();
		
        for (Schema.SObjectType objectName : Schema.getGlobalDescribe().values()) {

			Schema.DescribeSObjectResult mapOfObjResult = objectName.getDescribe();

			//if(mapOfObjResult.isCustom() && mapOfObjResult.isCreateable()) {

					String ObjectApiName = mapOfObjResult.getName();
					
					mapOfSobject.put(ObjectApiName,ObjectApiName);
			//}
		}createPackage(mapOfSobject);
    }

	public void createPackage(Map<String,String> mapOfSobject ) {
			
		String packageText;
		packageText = '<?xml version="1.0" encoding="UTF-8"?> \n';
		packageText += '<Package xmlns="http://soap.sforce.com/2006/04/metadata"> \n';
		packageText += '\t<types>\n';        
        
		//Loop over key set
        for(String objects : mapOfSobject.keyset()){

            packageText  += '\t\t<members>'+objects+'</members> \n';
 
        }
		packageText += '\t\t<name>CustomObject</name> \n';
		packageText += '\t</types>\n';
		packageText += '\t<version>37.0</version>\n';
		packageText += '</Package>\n';
        List<Messaging.Emailfileattachment> fileAttachments = new List<Messaging.Emailfileattachment>();
        Messaging.Emailfileattachment efa = new Messaging.Emailfileattachment();
        efa.setContentType('text/plain');
        efa.setFileName('package.xml');
        efa.setBody(Blob.valueOf(packageText));
        fileAttachments.add(efa);
        
        //List of SingleEmailMessage
        List<Messaging.SingleEmailMessage> mails = new List<Messaging.SingleEmailMessage>();
        
        //Instance of SingleEmailMessage
        Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
        
        //Set to address (Receiver)
        mail.setToAddresses(new List <String> { 'divya.bharadwaj@simplyforce.com'});
        
        //Set subject
        mail.setSubject('package');
        
        String mailBody = 'Hi '+UserInfo.getFirstName()+', <br><br>';
        mailBody += 'Please find the attached package file. <br><br><br>';
        
        mailBody += 'Thank You!';
        
        //Set mail body
        mail.setHtmlBody(mailBody);
        
        mail.setFileAttachments(fileAttachments);
        
        //Mail add to list
        mails.add(mail);
        
        //Send email
        Messaging.sendEmail(mails); 
    }
}GetManagePackageObject obj = new GetManagePackageObject();
obj.getObjectName();
